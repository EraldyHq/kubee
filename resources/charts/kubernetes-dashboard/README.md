# Kubee Chart of kubernetes-dashboard

## About
A Kubee Chart of the [kubernetes-dashboard](https://github.com/kubernetes/dashboard)

## Steps

### Cluster file Configuration

All configurations can be seen in their respective `values file`
* [kubernetes_dashboard values file](values.yaml)
* [cluster values file](../cluster/values.yaml)

```yaml
kubernetes_dashboard:
  # Set a hostname if you want the dashboard to be available 
  # We recommend to use a DNS name based lookup server such as sslip.io or sslip.io
  # to not advertise it in your DNS
  hostname: ''
cluster:
  auth:
      admin_user:
        # This chart creates a k8s service account
        # for this user, Change it if you want another name
        name: 'admin'
        # Not used by Kubernetes Dashboard. 
        # They use K8s RBAC. You need to create a token in the next step.
        password: ''
```

### Install

```bash
kubee -c clusterName helmet play kubernetes-dashboard
```



### Access the dashboard

Access the Kubernetes dashboard at https://hostname

> [!Note]
> You can still access it without Ingress 
> For Information, you can see how on this section: [How to access the dashboard without Ingress](contrib/contrib.md#how-to-access-the-dashboard-without-ingress)

## Create Access Credentials

### Without auth middleware

Without authentication middleware, this chart creates an account for your admin user defined in the [cluster values](../cluster/values.yaml)

To access your dashboard, you need to generate a `token` for this Service account

* Get the `cluster.auth.admin_user` value in your cluster file. If empty, the default is [admin](../cluster/values.yaml))
```bash
kubectl -n kubernetes-dashboard create token ACCOUNT_NAME --duration=8400h
# with admin
kubectl -n kubernetes-dashboard create token admin --duration=8400h
```

### With auth middleware

When the auth middleware is applied, the token:
* is generated by Dex
* returned to the Kubernetes Dashboard via Oauth Proxy.

The authorizations are given via Rbac [Ref](https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-binding-examples)
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: user-role-binding
  namespace: your-namespace
subjects:
- kind: User
  name: "alice@example.com"  # The username
  apiGroup: rbac.authorization.k8s.io
- kind: Group
  name: "frontend-admins"
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role  # Can also reference a ClusterRole
  name: role-name  # Name of your existing Role
  apiGroup: rbac.authorization.k8s.io
```

