.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "kubectl-xenv" "1" "" "Version Latest" "Print the export environment variables"
.hy
.SH DESCRIPTION
.PP
Print the export environment statements.
.SH USAGE AND EXAMPLE
.PP
This script is used by all \f[V]kube-x\f[R] scripts to set the
environment
.IP
.nf
\f[C]
KUBE_X_ENV=$(source kubectl-xenv \[dq]$KUBE_X_APP_NAME\[dq])
eval \[dq]$KUBE_X_ENV\[dq]
\f[R]
.fi
.PP
Note: The substitution is not in the eval because bash would not stop
the script otherwise even with the \f[V]-Ee\f[R] options.
.SH SYNOPSIS
.PP
Print the kubernetes and kube-x environment variables in a export format
.IP
.nf
\f[C]
kubectl-xenv [<app name>]
\f[R]
.fi
.PP
where \f[V]app name\f[R] is optional if the current directory is below
the \f[V]KUBE_X_APP_HOME\f[R].
.SH ENVIRONMENT
.SS KUBE_X_APP_NAME
.IP
.nf
\f[C]
export KUBE_X_APP_NAME=xxx
\f[R]
.fi
.PP
Default to the current directory name if it is below the KUBE_X_APP_HOME
.PP
The kubernetes objects are searched with the label
\f[V]app.kubernetes.io/name=<app name>\f[R]
.SS KUBE_X_APP_NAMESPACE
.PP
The \f[V]KUBE_X_APP_NAMESPACE\f[R] environment variable defines the
\f[V]namespace\f[R] of the app and is used to determine the connection
namespace
.SS KUBE_X_DEFAULT_NAMESPACE
.PP
\f[V]KUBE_X_DEFAULT_NAMESPACE\f[R] defines the default connection
namespace when no namespace has been found
.SS KUBE_X_KUBECTL
.PP
\f[V]KUBE_X_KUBECTL\f[R] defines the \f[V]kubectl\f[R] client used.
.PP
The possible values are: * \f[V]kubectl\f[R]: the default *
\f[V]kubectx\f[R]: to use kubectx to get: * the users and cluster data
from the pass store manager.
* the namespace from the environment
.SS KUBE_X_APP_HOME
.PP
The \f[V]$KUBE_X_APP_HOME\f[R] environment variable defines a path
environment variable where each path is a directory that contains
applications.
.PP
It should be set in your \f[V].bashrc\f[R]
.PP
Example:
.IP
.nf
\f[C]
export KUBE_X_APP_HOME=$HOME/my-kube-apps:$HOME/my-other-kube-apps
\f[R]
.fi
.SS KUBE_X_BUSYBOX_IMAGE
.PP
The image used by kubectl-xshell when asking for a shell in a busybox.
.PP
Default to
ghcr.io/gerardnico/busybox:latest (https://github.com/gerardnico/busybox/pkgs/container/busybox)
.IP
.nf
\f[C]
export KUBE_X_BUSYBOX_IMAGE=ghcr.io/gerardnico/busybox:latest
\f[R]
.fi
.SS Connection Namespace
.PP
The connection namespace is a derived environment variable
\f[V]KUBE_X_CONNECTION_NAMESPACE\f[R] used by kubectx.
.SS Namespace Order of precedence
.PP
In order, the connection namespace value used is: * \f[V]default\f[R] if
the flag \f[V]--all-namespace\f[R] is passed * the option value of the
flag \f[V]-n|--namespace\f[R] * KUBE_X_APP_NAMESPACE * KUBE_X_APP_NAME
if set * KUBE_X_DEFAULT_NAMESPACE if it exists * Otherwise, for the
KUBE_X_KUBECTL value of: * \f[V]kubectx\f[R]: \f[V]default\f[R] *
\f[V]kubectl\f[R]: the \f[V]kubeconfig\f[R] current namespace value
.SS Mandatory Namespace
.PP
The namespace is only mandatory for the kubectl-xapply command.
.PP
Otherwise, it\[cq]s determined by a label global search on the app name.
.SS How
.SS How to set my own environment variable by app scope
.PP
You can override the default environment values by creating a
\f[V].envrc\f[R] located in the app directory (ie
\f[V]KUBE_X_APP_HOME/KUBE_X_APP_NAME\f[R]).
.SH TIP
.PP
To get the env in the prompt such as cluster and namespace, check
kube-ps1 (https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/kube-ps1)
