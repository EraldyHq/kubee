

[//]: # (README.md generated by gotmpl. DO NOT EDIT.)

![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![Version: 0.0.0](https://img.shields.io/badge/Version-0.0.0-informational?style=flat-square) ![AppVersion: 0.15.1](https://img.shields.io/badge/AppVersion-0.15.1-informational?style=flat-square)

# Kubee External Dns Chart

This kubee chart will install [external-dns](https://github.com/kubernetes-sigs/external-dns)

`External DNS` can update your domain/public DNS based on:
* [metadata annotations](https://kubernetes-sigs.github.io/external-dns/latest/docs/annotations/annotations/) on Ingress, Service, ...
* or [DNS CRD definition](https://kubernetes-sigs.github.io/external-dns/latest/docs/contributing/crd-source/)

## Features

### Auto Sources Creation

These sources are automatically enabled.
* [Ingress](https://kubernetes-sigs.github.io/external-dns/latest/docs/sources/ingress/) - `hostname` is retrieved from `spec.rules.host` metadata
* [Service](https://kubernetes-sigs.github.io/external-dns/latest/docs/sources/service/) - for service without Ingress (ie LoadBalancer)
* [TraefikIngress](https://kubernetes-sigs.github.io/external-dns/latest/docs/sources/traefik-proxy/) if [Traefik](https://github.com/EraldyHq/kubee/blob/main/charts/Traefik/README.md) is enabled
* [DNS CRD](https://kubernetes-sigs.github.io/external-dns/latest/docs/contributing/crd-source/). Example:
  * [Txt Record](https://kubernetes-sigs.github.io/external-dns/latest/docs/sources/txt-record/)
  * [Mx Record](https://kubernetes-sigs.github.io/external-dns/latest/docs/sources/mx-record/)

 
### Monitoring

Prometheus is automatically configured if enabled.
You can monitor [Rate Limit Metrics](https://kubernetes-sigs.github.io/external-dns/latest/docs/rate-limits/#monitoring)

### Support In-tree and WebHook DNS

This chart supports:
+ `in-tree` DNS provider
+ `external webhook` DNS provider

### Kubee Charts Features

  These [kubee charts](https://github.com/EraldyHq/kubee/blob/main/docs/site/kubee-helmet-chart.md) add their features when `enabled`.

* [cert-manager](https://github.com/EraldyHq/kubee/blob/main/charts/cert-manager/README.md) adds [server certificates](https://cert-manager.io/docs/usage/certificate/) to the servers
* [prometheus](https://github.com/EraldyHq/kubee/blob/main/charts/prometheus/README.md) creates [metrics scraping jobs](https://prometheus.io/docs/concepts/jobs_instances/) and [alert rules](https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/)
* [traefik](https://github.com/EraldyHq/kubee/blob/main/charts/traefik/README.md) creates an [ingress](https://kubernetes.io/docs/concepts/services-networking/ingress/) if hostnames are defined

## Installation

```bash
kubee helmet --cluster cluster-name play external-dns
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| enabled | bool | `false` | Boolean to indicate that this chart is or will be installed in the cluster |
| namespace | string | `"external-dns"` | The installation namespace |
| provider.args | list | `[]` |  |
| provider.env | list | `[]` |  |
| provider.image | string | `""` | Required if the provider is `out-tree` Example: `ghcr.io/mconfalonieri/external-dns-hetzner-webhook:v0.7.0` |
| provider.in_tree.cloudflare.dns_records_per_page | int | `100` |  |
| provider.in_tree.cloudflare.proxied | bool | `false` |  |
| provider.in_tree.cloudflare.region_key | string | `"global"` |  |
| provider.in_tree.common.domain_filter | list | `[]` | Domain filter (optional) limit to only domains; change to match the zone Create DNS records for host names that match E.g. `example.org` will allow the zone `example.org` and all subdomains (ie `xx.example.org`) `a.example.com` will allow for zone `example.com` `.example.com` will not attempt to match parent zones. |
| provider.in_tree.common.exclude_domains | list | `[]` |  |
| provider.in_tree.common.regex_domain_filter | string | `""` |  |
| provider.in_tree.common.zone_id_filter | list | `[]` |  |
| provider.name | string | `""` | The name of the provider (Required for an in-tree provider) |
| provider.ports.health | int | `7978` | The health port |
| provider.ports.metrics | int | `7978` | The metrics port |
| provider.ports.webhook | int | `8888` | The webhook/http  port |
| provider.type | string | `"in-tree"` | Webhook Provider. `in-tree` or `out-tree` `in-tree` will use `external-dns` as webhook provider. With `out-tree`, you need to provide the image |
| server.cache_time | string | `"4h"` | The local DNS cache to avoid [rate limiting](https://kubernetes-sigs.github.io/external-dns/latest/docs/rate-limits/) If a DNS entry is deleted/modified manually, the recovery will need to wait this interval for resynchronization. Or you need to restart the pod. |
| server.interval | string | `"1m"` | Interval for DNS sync. |
| server.policy | string | `"upsert-only"` | Policy Synchronization. `upsert-only`: Prevent deleting any records. `sync`: if you want DNS entries to get deleted as well |
| version | string | `"0.15.1"` | [External DNS version](https://github.com/kubernetes-sigs/external-dns/releases) |

There is more parameters in the [values file](values.yaml)

## Contrib / Dec

Dev and contrib documentation can be found [here](contrib/contrib.md)

