{{- if eq .Values.grafana.enabled true }}
{{ $folderId := sha256sum "folder-kuberhealthy" }}
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaFolder
metadata:
  name: kuberhealthy
spec:
  allowCrossNamespaceImport: true
  instanceSelector:
    matchLabels:
      dashboards: "{{.Values.grafana.name}}"
  title: 'Kuberhealthy'
  uid: {{ $folderId }}
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: kuberhealthy
spec:
  allowCrossNamespaceImport: true
  instanceSelector:
    matchLabels:
      dashboards: "{{.Values.grafana.name}}"
  configMapRef:
    name: 'grafana-kuberhealthy'
    key: 'grafana-kuberhealthy.json'
  folderUID: {{ $folderId }}
{{- end}}